---
layout: post
title: "TCP/IP 5계층 (네트워크)"
date: 2020-10-20 13:00:59
author: mollangzzang
categories: TIL
tags: TIL network
cover: "/assets/TIL.png"
---

# 네트워크 계층

> 네트워크 계층은 다른 네트워크에 있는 목적지에 데이터를 전송한다. 이를 위헤 라우터라는 장비와 IP(Internet Protocol) 이라는 프로토콜이 사용된다.

## 라우터

네트워크 장치인 라우터를 사용하면 거리에 상관없이 다른 네트워크에 데이터를 보낼 수 있다. 라우터는 데이터의 목적지까지 **어떤 경로로 가는게 좋은지** 알려주는 기능을 한다. 이 때 라우터가 데이터를 어떤 경로로 보낼지 결정하는 것을 **라우팅**이라고 한다. 라우터 내부에는 경로 정보를 등록하고 관리하는 **라우팅 테이블**이 존재한다.

## IP 주소

> 라우터가 목적지를 식별하기 위해 사용하는 주소

어떤 네트워크의 컴퓨터인지 판별할 수 있게 해준다.
IP 주소는 ISP에게 받을 수 있다. 국내에서는 SKT, KT, LG U+가 대표적이다.

## IP Protocol version

IPv4 : 32bit로 구성되어 있어 약 43억개의 주소를 만들 수 있다.
IPv6 : 128bit로 되어있다. IPv4 로 할당할 수 있는 주소의 갯수가 부족하게 되는 문제가 발생하여 대안으로 등장하였다.

## 공인 IP, 사설 IP 주소

공인 IP : ISP에서 제공하는 주소
사설 IP : 하나의 네트워크 내부에서 사용하는 주소 (내부망 전용)

회사가 ISP로 부터 공인 IP를 할당받으면 라우터의 DHCP 기능을 통해 사설 IP를 할당하여 네트워크를 구축하는 형식.

## IP 주소의 구성

IP 주소는 네트워크 ID와 호스트 ID로 나누어져 있다.

네트워크 ID : 어떤 네트워크 인지 나타내는 식별자

호스트 ID : 해당 네트워크의 어떤 컴퓨터인지 나타내는 식별자

IP 주소에서 네트워크 ID와 호스트ID 각각의 길이에 따라 **클래스**가 나누어진다. 클래스는 A ~ E 까지 있지만, 대부분 A ~ C까지만 사용된다.

A Class : `1.0.0.0` ~ `127.255.255.255`
B Class : `128.0.0.0` ~ `191.255.255.255`
C Class : `192.0.0.0` ~ `223.255.255.255`

공인 IP 주소와 겹치지 않는 범위의 IP들을 사설 IP로 사용할 수 있다.

## 네트워크 , 브로드캐스트 주소

> 특별한 의미를 가지는 IP 주소로, 컴퓨터나 라우터가 자신의 IP로 사용할 수 없는 주소

네트워크 주소 : `192.168.1.0` 로, 전체 네트워크에서 작은 네트워크를 식별할 때 사용한다. 전체네트워크를 대표하는 주소

브로드캐스트 주소 : `192.168.1.255`로, 브로드캐스트 주소는 브로드캐스트를 위한 전용 주소다. 브로드캐스트는 네트워크에 있는 모든 컴퓨터에 한번에 데이터를 전송하는 방식이다.

## 서브넷

A 클래스에서는 호스트를 식별하기 위해 최대 2^24개의 호스트 ID를 사용할 수 있다. 네트워크 안에 있는 수많은 컴퓨터가 브로드캐스트 패킷을 전송하면 네트워크가 혼잡해질 것이다. 따라서 A 클래스의 대규모 네트워크를 작은 네트워크로 분할해 브로드캐스트로 전송되는 패킷 범위를 좁힐 수 있다. 이렇게하면 IP 주소를 더 효과적으로 활용할 수 있다. 이렇게 네트워크를 분할하는 것을 **서브넷팅(subneting)이**라 하고, 분할된 네트워크 하나하나를 **서브넷(subnet)**이라고 한다.

A Class 네트워크에 서브넷팅을 적용하면 기존의 네트워크 ID , 호스트 ID로 구성되어 있던 **IP에 추가적으로 서브넷을 식별하기 위한 정보가 추가로 필요**하다. 따라서 IP 주소는 네트워크 ID, 서브넷 ID, 호스트 ID로 나뉘게 된다.

## 서브넷 마스크

> 네트워크 ID와 호스트 ID를 식별하기 위해서 서브넷 마스크라는 값을 사용한다. 호스트 ID를 0으로, 네트워크 ID를 1로 표시한다.

## 게이트웨이

라우터는 서로 다른 네트워크와 통신하기 위해서 필요한 물리장치이다. 스위치나 허브는 네트워크를 분리하지 못하지만 **라우터는 서브넷 단위로 네트워크를 분할 가능하다.**

컴퓨터가 다른 네트워크의 컴퓨터로 데이터를 전송하고자 할 때, 일단 라우터로 데이터를 전송한다. 이를 위해 라우터의 IP 주소를 설정하는 것을 기본 게이트웨이 라고 한다.

### Ref.

https://zion830.tistory.com/133

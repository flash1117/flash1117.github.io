---
layout: post
title: "데이터베이스 인덱스"
date: 2020-10-23 13:00:59
author: mollangzzang
categories: TIL
tags: TIL DB
cover: "/assets/TIL.png"
---

## 인덱스

> 데이터베이스 분야에 있어서 테이블에 대한 동작의 속도를 높여주는 자료구조

테이블 내의 1개의 column, 혹은 여러개의 column을 통해 생성될 수 있다. 고속의 검색 동작뿐 아니라 레코드 접근과 관련 효율적인 순서 매김 동작에 대한 기초를 제공한다.

무조건 인덱스를 많이 설정하는 것이 검색 속도를 높여주지 않는다.
**조회시 자주 사용하며, 고유한 값 위주로 인덱스를 설정**하는 것이 좋다.

## 인덱스 사용 이유

> 특정 column 값을 가지고 있는 열 혹은 값을 빠르게 찾기 위해서 사용한다.

MySQL의 경우 첫째 열부터 전체 테이블에 걸쳐서 연관된 열을 검색하기 때문에 테이블의 크기에 비례하여 비용이 커진다. 만약 테이블이 쿼리에 대한 인덱스를 가지고 있다면, MySQL은 모든 데이터를 조사하지 않고도 데이터 파일의 중간에서 검색위치를 빠르게 잡아낼 수 있다.

## 인덱스를 사용해야 하는 경우

- 데이터의 양이 많고 검색이 변경보다 빈번한 경우
- 인덱스를 걸고자 하는 필드의 값이 다양한 값을 가지는 경우

## 인덱스 설정시 고려사항

- 카디널리티 (Cardinality)
- 선택도 (Selectivity)
- 활용도
- 중복도

### 카디널리티 (Cardinality)

> 컬럼에 사용되는 값의 다양성 정도, **중복수치**를 나타내는 지표

카디널리티가 높을 수록 인덱스 설정에 좋은 컬럼이다. ( = 한 컬럼이 갖고 있는 값의 중복 정도가 낮을 수록 좋다)

### 선택도 (Selectivity)

> 데이터에서 특정 값을 얼마나 잘 선택할 수 있는지에 대한 지표

**선택도가 낮을 수록 인덱스 설정에 좋은 컬럼**이다. 계산하는 방법은 특정 필드값을 지정했을 때 **선택되는 레코드 수 / 테이블 전체 레코드 수**이다.
5퍼 ~ 10퍼가 적정수준이라고 한다.

### 활용도

> 해당 컬럼이 실제 작업에서 얼마나 활용되는지에 대한 값.

수동 쿼리 조회, 로직과 서비스에서 쿼리를 날릴 때 WHERE 절에 자주 활용되는지를 판단하면 된다. **활용도가 높을 수록 인덱스 설정에 좋은 컬럼**

### 중복도

> 중복 인덱스에 대한 여부

인덱스 성능에 대한 고려 없이 마구잡이로 설정하거나 다른 부서 작업자의 분리된 요청으로 같은 컬럼에 대해 인덱스가 중복으로 생성된 경우가 있다.
**중복도가 없을 수록 인덱스 설정에 좋은 컬럼**이다. 인뎃스도 결국 메모리의 일부이므로 필요없는 항목은 삭제하는 것이 좋다.

### Ref.

https://itrainbowm.tistory.com/20
https://yurimkoo.github.io/db/2020/03/14/db-index.html
